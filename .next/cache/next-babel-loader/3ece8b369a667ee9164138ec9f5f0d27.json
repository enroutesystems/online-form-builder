{"ast":null,"code":"import { firestore } from '../firebaseConfig';\nimport collections from './collections';\nimport { getResponses } from './answer';\n\nconst getForms = async uid => {\n  const forms = [];\n  const snapshotForms = await firestore.collection(collections.forms).where('uid', '==', uid).get();\n  snapshotForms.forEach(doc => forms.push(doc));\n  return forms;\n};\n\nconst getUsersWhoAnsweredCount = form => {\n  console.log(form);\n\n  if (form.responses[0]) {\n    let counter = form.responses.filter(response => response.questionId === form.responses[0].questionId).length;\n    form.usersWhoAnswered = counter;\n  } else {\n    form.usersWhoAnswered = 0;\n  }\n\n  delete form.responses;\n  return form;\n};\n\nexport const formsStatistics = async uid => {\n  const responses = [];\n  const forms = await getForms(uid);\n\n  for (let form of forms) {\n    const formWithAnswers = await getResponses(form.id);\n    responses.push(getUsersWhoAnsweredCount(formWithAnswers));\n  }\n\n  return responses;\n};","map":null,"metadata":{},"sourceType":"module"}